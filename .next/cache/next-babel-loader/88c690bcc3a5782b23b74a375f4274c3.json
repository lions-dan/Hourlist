{"ast":null,"code":"import _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/Daniel/Websites/Hourlist/components/Layout.js\";\nvar __jsx = React.createElement;\nimport React from 'react';\nimport GlobalStyle from '../styles/GlobalStyles';\nimport Button from '../styles/button';\nimport fetch from 'isomorphic-unfetch';\nimport MainFrame from './MainFrame';\n\nvar Layout =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Layout, _React$Component);\n\n  function Layout(props) {\n    var _this;\n\n    _classCallCheck(this, Layout);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Layout).call(this, props));\n    _this.state = {\n      authenticated: false\n    };\n    return _this;\n  }\n\n  _createClass(Layout, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var accessToken = document.location.hash;\n\n      if (accessToken !== \"\") {\n        accessToken = accessToken.split('&').filter(function (el) {\n          if (el.match('access_token') !== null) return true;\n        })[0].split('=')[1];\n        this.setState({\n          authenticated: true,\n          accessToken: accessToken\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      function authenticateSpotify() {\n        var clientID = \"05254a545218406db543397b27a55c17\";\n        var endPoint = \"authorize\";\n        var responseType = \"token\";\n        var scope = \"playlist-modify-public%20playlist-modify-private%20user-top-read%20user-library-read%20playlist-read-private\";\n        var redirectURI = \"http://localhost:3000\";\n        var accessToken;\n        console.log(\"Authenticating\");\n        var url = \"https://accounts.spotify.com/authorize?client_id=\" + clientID + \"&redirect_uri=\" + redirectURI + \"&scope=\" + scope + \"&response_type=token\";\n        window.location.replace(url);\n      }\n\n      if (!this.state.authenticated) {\n        return __jsx(\"div\", {\n          id: \"root\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 39\n          },\n          __self: this\n        }, __jsx(GlobalStyle, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 40\n          },\n          __self: this\n        }), __jsx(Button, {\n          onClick: authenticateSpotify,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 41\n          },\n          __self: this\n        }, \" Authenticate Spotify \"));\n      } else {\n        return __jsx(\"div\", {\n          id: \"root\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 46\n          },\n          __self: this\n        }, __jsx(GlobalStyle, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 47\n          },\n          __self: this\n        }), __jsx(MainFrame, {\n          token: this.state.accessToken,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 48\n          },\n          __self: this\n        }));\n      }\n    }\n  }]);\n\n  return Layout;\n}(React.Component);\n\n;\nexport default Layout;","map":{"version":3,"sources":["/Users/Daniel/Websites/Hourlist/components/Layout.js"],"names":["React","GlobalStyle","Button","fetch","MainFrame","Layout","props","state","authenticated","accessToken","document","location","hash","split","filter","el","match","setState","authenticateSpotify","clientID","endPoint","responseType","scope","redirectURI","console","log","url","window","replace","Component"],"mappings":";;;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,WAAP,MAAwB,wBAAxB;AACA,OAAOC,MAAP,MAAmB,kBAAnB;AACA,OAAOC,KAAP,MAAkB,oBAAlB;AACA,OAAOC,SAAP,MAAsB,aAAtB;;IAGMC,M;;;;;AACJ,kBAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,gFAAMA,KAAN;AACA,UAAKC,KAAL,GAAa;AAACC,MAAAA,aAAa,EAAC;AAAf,KAAb;AAFiB;AAGlB;;;;wCAGkB;AACjB,UAAIC,WAAW,GAAGC,QAAQ,CAACC,QAAT,CAAkBC,IAApC;;AACA,UAAGH,WAAW,KAAK,EAAnB,EAAsB;AACpBA,QAAAA,WAAW,GAAGA,WAAW,CAACI,KAAZ,CAAkB,GAAlB,EACbC,MADa,CACN,UAASC,EAAT,EAAa;AAAE,cAAGA,EAAE,CAACC,KAAH,CAAS,cAAT,MAA6B,IAAhC,EAAsC,OAAO,IAAP;AAAc,SAD7D,EAC+D,CAD/D,EACkEH,KADlE,CACwE,GADxE,EAC6E,CAD7E,CAAd;AAEC,aAAKI,QAAL,CAAc;AAACT,UAAAA,aAAa,EAAC,IAAf;AAAoBC,UAAAA,WAAW,EAACA;AAAhC,SAAd;AACF;AACF;;;6BACO;AAER,eAASS,mBAAT,GAA8B;AAC5B,YAAMC,QAAQ,GAAG,kCAAjB;AACA,YAAMC,QAAQ,GAAG,WAAjB;AACA,YAAMC,YAAY,GAAG,OAArB;AACA,YAAMC,KAAK,GAAG,8GAAd;AACA,YAAMC,WAAW,GAAG,uBAApB;AACA,YAAId,WAAJ;AACAe,QAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ;AACA,YAAMC,GAAG,GAAG,sDAAoDP,QAApD,GAA6D,gBAA7D,GAA8EI,WAA9E,GAA0F,SAA1F,GAAoGD,KAApG,GAA0G,sBAAtH;AACAK,QAAAA,MAAM,CAAChB,QAAP,CAAgBiB,OAAhB,CAAwBF,GAAxB;AACD;;AAED,UAAG,CAAC,KAAKnB,KAAL,CAAWC,aAAf,EAA6B;AAC3B,eACI;AAAK,UAAA,EAAE,EAAC,MAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACA,MAAC,WAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADA,EAEA,MAAC,MAAD;AAAQ,UAAA,OAAO,EAAEU,mBAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oCAFA,CADJ;AAMC,OAPH,MAOO;AACF,eACG;AAAK,UAAA,EAAE,EAAC,MAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACA,MAAC,WAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADA,EAEE,MAAC,SAAD;AAAW,UAAA,KAAK,EAAE,KAAKX,KAAL,CAAWE,WAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAFF,CADH;AAMD;AAIH;;;;EA/CkBT,KAAK,CAAC6B,S;;AAkD1B;AAID,eAAexB,MAAf","sourcesContent":["import React from 'react';\nimport GlobalStyle from '../styles/GlobalStyles';\nimport Button from '../styles/button';\nimport fetch from 'isomorphic-unfetch';\nimport MainFrame from './MainFrame'\n\n\nclass Layout extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {authenticated:false};\n  }\n  \n\n  componentDidMount(){\n    var accessToken = document.location.hash;\n    if(accessToken !== \"\"){\n      accessToken = accessToken.split('&')\n      .filter(function(el) { if(el.match('access_token') !== null) return true; })[0].split('=')[1];\n       this.setState({authenticated:true,accessToken:accessToken})\n    }\n  }\n  render(){\n\n  function authenticateSpotify(){\n    const clientID = \"05254a545218406db543397b27a55c17\";\n    const endPoint = \"authorize\";\n    const responseType = \"token\";\n    const scope = \"playlist-modify-public%20playlist-modify-private%20user-top-read%20user-library-read%20playlist-read-private\";\n    const redirectURI = \"http://localhost:3000\";\n    var accessToken;\n    console.log(\"Authenticating\")\n    const url = \"https://accounts.spotify.com/authorize?client_id=\"+clientID+\"&redirect_uri=\"+redirectURI+\"&scope=\"+scope+\"&response_type=token\"\n    window.location.replace(url);\n  }\n  \n  if(!this.state.authenticated){\n    return(\n        <div id=\"root\">\n        <GlobalStyle />\n        <Button onClick={authenticateSpotify}> Authenticate Spotify </Button>\n        </div>\n      )\n    }else{\n       return (\n          <div id=\"root\">\n          <GlobalStyle />\n            <MainFrame token={this.state.accessToken}/> \n          </div>   \n        )\n     }\n\n   \n\n  }\n  \n\n};\n\n\n\nexport default Layout;"]},"metadata":{},"sourceType":"module"}