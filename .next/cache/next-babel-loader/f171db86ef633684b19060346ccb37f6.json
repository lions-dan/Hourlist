{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _toConsumableArray from \"@babel/runtime-corejs2/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nvar _jsxFileName = \"/Users/Daniel/Websites/Hourlist/components/MainFrame.js\";\nvar __jsx = React.createElement;\nimport React from 'react';\nimport Container from '@material-ui/core/Container';\nimport styled from 'styled-components';\nimport Paper from '@material-ui/core/Paper';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Button from '@material-ui/core/Button';\nimport Grid from '@material-ui/core/Grid';\nimport Tracks from './Tracks';\nimport Playlist from './Playlist';\nimport PlaylistSelector from './PlaylistSelector';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    typography: {\n      padding: theme.spacing(2)\n    }\n  };\n});\n\nfunction getSpotifyProfile(_x) {\n  return _getSpotifyProfile.apply(this, arguments);\n}\n\nfunction _getSpotifyProfile() {\n  _getSpotifyProfile = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee(token) {\n    var apiUrlOne, response, profileObject;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            apiUrlOne = 'https://api.spotify.com/v1/me';\n            _context.next = 3;\n            return fetch(apiUrlOne, {\n              method: 'GET',\n              mode: 'cors',\n              cache: 'no-cache',\n              credentials: 'same-origin',\n              headers: {\n                'Authorization': 'Bearer ' + token\n              }\n            });\n\n          case 3:\n            response = _context.sent;\n            _context.next = 6;\n            return response.json();\n\n          case 6:\n            profileObject = _context.sent;\n            return _context.abrupt(\"return\", profileObject);\n\n          case 8:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _getSpotifyProfile.apply(this, arguments);\n}\n\nfunction addUserLibrary(_x2, _x3) {\n  return _addUserLibrary.apply(this, arguments);\n}\n\nfunction _addUserLibrary() {\n  _addUserLibrary = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee2(token, limit) {\n    var apiURL, response, libraryObject;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            apiURL = \"https://api.spotify.com/v1/me/tracks?limit=\" + limit;\n            _context2.next = 3;\n            return fetch(apiURL, {\n              method: 'GET',\n              mode: 'cors',\n              cache: 'no-cache',\n              credentials: 'same-origin',\n              headers: {\n                'Authorization': 'Bearer ' + token\n              }\n            });\n\n          case 3:\n            response = _context2.sent;\n            _context2.next = 6;\n            return response.json();\n\n          case 6:\n            libraryObject = _context2.sent;\n            return _context2.abrupt(\"return\", libraryObject);\n\n          case 8:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _addUserLibrary.apply(this, arguments);\n}\n\nfunction addUserTopTracks(_x4, _x5) {\n  return _addUserTopTracks.apply(this, arguments);\n}\n\nfunction _addUserTopTracks() {\n  _addUserTopTracks = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee3(token, limit) {\n    var apiURL, response, libraryObject;\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            apiURL = \"https://api.spotify.com/v1/me/top/tracks?limit=\" + limit;\n            _context3.next = 3;\n            return fetch(apiURL, {\n              method: 'GET',\n              mode: 'cors',\n              cache: 'no-cache',\n              credentials: 'same-origin',\n              headers: {\n                'Authorization': 'Bearer ' + token\n              }\n            });\n\n          case 3:\n            response = _context3.sent;\n            _context3.next = 6;\n            return response.json();\n\n          case 6:\n            libraryObject = _context3.sent;\n            return _context3.abrupt(\"return\", libraryObject);\n\n          case 8:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  }));\n  return _addUserTopTracks.apply(this, arguments);\n}\n\nfunction addLibraryFeatures(_x6, _x7) {\n  return _addLibraryFeatures.apply(this, arguments);\n}\n\nfunction _addLibraryFeatures() {\n  _addLibraryFeatures = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee4(token, tracks) {\n    var arrayOfTracks, apiURL, response, libraryObject;\n    return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            arrayOfTracks = [];\n            tracks.forEach(function (element) {\n              arrayOfTracks.push(element.id);\n            });\n            tracks = arrayOfTracks.toString();\n            apiURL = \"https://api.spotify.com/v1/audio-features/?ids=\" + tracks;\n            _context4.next = 6;\n            return fetch(apiURL, {\n              method: 'GET',\n              mode: 'cors',\n              cache: 'no-cache',\n              credentials: 'same-origin',\n              headers: {\n                'Authorization': 'Bearer ' + token\n              }\n            });\n\n          case 6:\n            response = _context4.sent;\n            _context4.next = 9;\n            return response.json();\n\n          case 9:\n            libraryObject = _context4.sent;\n            return _context4.abrupt(\"return\", libraryObject);\n\n          case 11:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, _callee4);\n  }));\n  return _addLibraryFeatures.apply(this, arguments);\n}\n\nvar generateReady = false;\nvar totalTime = 0;\n\nvar MainFrame =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(MainFrame, _React$Component);\n\n  function MainFrame(props) {\n    var _this;\n\n    _classCallCheck(this, MainFrame);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(MainFrame).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"checkTrackSize\", function (dataFromChild) {\n      if (dataFromChild >= 60 && _this.state.generateReady == false) {\n        console.log(\"Generate ready!\" + dataFromChild);\n\n        _this.setState({\n          generateReady: true\n        });\n\n        totalTime = dataFromChild;\n      }\n    });\n\n    _this.state = {\n      importedLibrary: false,\n      importedTop: false,\n      imported: [],\n      features: [],\n      generateReady: false,\n      totalTime: 0,\n      renderTable: true,\n      pickPlaylist: false,\n      open: false,\n      setOpen: false,\n      featuresGenerated: false,\n      user_id: \"null\"\n    };\n    return _this;\n  }\n\n  _createClass(MainFrame, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      getSpotifyProfile(this.props.token).then(function (value) {\n        _this2.setState({\n          user_id: value.id\n        });\n      });\n    }\n  }, {\n    key: \"handleOpen\",\n    value: function handleOpen() {\n      this.setState({\n        open: true\n      });\n    }\n  }, {\n    key: \"handleClose\",\n    value: function handleClose() {\n      this.setState({\n        open: false\n      });\n    }\n  }, {\n    key: \"handleLibraryImport\",\n    value: function handleLibraryImport() {\n      var _this3 = this;\n\n      addUserLibrary(this.props.token, 10).then(function (librarySongs) {\n        var trackArray = librarySongs.items.map(function (obj) {\n          return obj.track;\n        });\n\n        _this3.setState(function (prevState) {\n          return {\n            imported: [].concat(_toConsumableArray(prevState.imported), _toConsumableArray(trackArray))\n          };\n        });\n      });\n      this.setState({\n        importedLibrary: true\n      });\n    }\n  }, {\n    key: \"handleTopImport\",\n    value: function handleTopImport() {\n      var _this4 = this;\n\n      addUserTopTracks(this.props.token, 10).then(function (topTracks) {\n        _this4.setState(function (prevState) {\n          return {\n            imported: [].concat(_toConsumableArray(prevState.imported), _toConsumableArray(topTracks.items))\n          };\n        });\n      });\n      this.setState({\n        importedTop: true\n      });\n    }\n  }, {\n    key: \"handleGenerate\",\n    value: function handleGenerate() {\n      var _this5 = this;\n\n      addLibraryFeatures(this.props.token, this.state.imported).then(function (features) {\n        var importedSong = _this5.state.imported;\n        var count = 0;\n        importedSong.forEach(function (element) {\n          element.feature = features.audio_features[count];\n          count = count + 1;\n        });\n\n        _this5.setState({\n          imported: importedSong,\n          renderTable: false,\n          pickPlaylist: true,\n          generateReady: false,\n          featuresGenerated: true\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this6 = this;\n\n      return __jsx(Container, {\n        maxWidth: \"lg\",\n        style: {\n          padding: \"5%\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      }, __jsx(Paper, {\n        style: {\n          margin: \"5%\",\n          padding: \"5%\",\n          height: '100%',\n          backgroundImage: 'linear-gradient(60deg, #29323c 0%, #485563 100%)',\n          display: 'grid'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      }, __jsx(Grid, {\n        container: true,\n        spacing: 5,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }, __jsx(Grid, {\n        item: true,\n        xs: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153\n        },\n        __self: this\n      }, __jsx(Button, {\n        disabled: this.state.importedLibrary,\n        variant: \"contained\",\n        size: \"large\",\n        onClick: function onClick() {\n          return _this6.handleLibraryImport();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154\n        },\n        __self: this\n      }, \" Import Saved Tracks \")), __jsx(Grid, {\n        item: true,\n        xs: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156\n        },\n        __self: this\n      }, __jsx(Button, {\n        disabled: this.state.importedTop,\n        variant: \"contained\",\n        size: \"large\",\n        onClick: function onClick() {\n          return _this6.handleTopImport();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      }, \" Import Library Tracks \")), __jsx(Grid, {\n        item: true,\n        xs: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159\n        },\n        __self: this\n      }, __jsx(Button, {\n        disabled: !this.state.generateReady,\n        variant: \"contained\",\n        size: \"large\",\n        onClick: function onClick() {\n          return _this6.handleGenerate();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160\n        },\n        __self: this\n      }, \" Generate Features \")), __jsx(Grid, {\n        item: true,\n        xs: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162\n        },\n        __self: this\n      }, __jsx(PlaylistSelector, {\n        token: this.props.token,\n        user_id: this.state.user_id,\n        featuresGenerated: !this.state.featuresGenerated,\n        importedSong: this.state.imported,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163\n        },\n        __self: this\n      })), __jsx(Grid, {\n        item: true,\n        xs: 12,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165\n        },\n        __self: this\n      }, this.state.renderTable ? __jsx(Tracks, {\n        generateReady: this.checkTrackSize,\n        tracksImported: this.state.importedLibrary || this.state.importedTop,\n        allTracks: this.state.imported,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166\n        },\n        __self: this\n      }) : __jsx(Playlist, {\n        allTracks: this.state.imported,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166\n        },\n        __self: this\n      })))));\n    }\n  }]);\n\n  return MainFrame;\n}(React.Component);\n\nexport default MainFrame;","map":{"version":3,"sources":["/Users/Daniel/Websites/Hourlist/components/MainFrame.js"],"names":["React","Container","styled","Paper","makeStyles","Button","Grid","Tracks","Playlist","PlaylistSelector","useStyles","theme","typography","padding","spacing","getSpotifyProfile","token","apiUrlOne","fetch","method","mode","cache","credentials","headers","response","json","profileObject","addUserLibrary","limit","apiURL","libraryObject","addUserTopTracks","addLibraryFeatures","tracks","arrayOfTracks","forEach","element","push","id","toString","generateReady","totalTime","MainFrame","props","dataFromChild","state","console","log","setState","importedLibrary","importedTop","imported","features","renderTable","pickPlaylist","open","setOpen","featuresGenerated","user_id","then","value","librarySongs","trackArray","items","map","obj","track","prevState","topTracks","importedSong","count","feature","audio_features","margin","height","backgroundImage","display","handleLibraryImport","handleTopImport","handleGenerate","checkTrackSize","Component"],"mappings":"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","sourcesContent":["import React from 'react'\nimport Container from '@material-ui/core/Container';\nimport styled from 'styled-components';\nimport Paper from '@material-ui/core/Paper';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Button from '@material-ui/core/Button';\nimport Grid from '@material-ui/core/Grid';\nimport Tracks from './Tracks'\nimport Playlist from './Playlist'\nimport PlaylistSelector from './PlaylistSelector'\nconst useStyles = makeStyles(theme => ({\n  typography: {\n    padding: theme.spacing(2),\n  },\n}));\n\n\nasync function getSpotifyProfile(token){\n    const apiUrlOne = 'https://api.spotify.com/v1/me'\n    const response = await fetch(apiUrlOne, {\n        method: 'GET',\n        mode: 'cors', \n        cache: 'no-cache',\n        credentials: 'same-origin',\n        headers: {\n          'Authorization': 'Bearer ' + token\n        }\n      });\n      const profileObject = await response.json();\n      return profileObject\n}\n\nasync function addUserLibrary(token,limit){\n    const apiURL = \"https://api.spotify.com/v1/me/tracks?limit=\"+limit\n    const response = await fetch(apiURL, {\n        method: 'GET',\n        mode: 'cors', \n        cache: 'no-cache',\n        credentials: 'same-origin',\n        headers: {\n          'Authorization': 'Bearer ' + token\n        }\n      });\n     const libraryObject = await response.json();\n     return libraryObject\n}\n\nasync function addUserTopTracks(token, limit){\n    const apiURL = \"https://api.spotify.com/v1/me/top/tracks?limit=\"+limit\n    const response = await fetch(apiURL, {\n        method: 'GET',\n        mode: 'cors', \n        cache: 'no-cache',\n        credentials: 'same-origin',\n        headers: {\n          'Authorization': 'Bearer ' + token\n        }\n      });\n     const libraryObject = await response.json();\n     return libraryObject\n}\n\n\nasync function addLibraryFeatures(token, tracks){\n  var arrayOfTracks = []\n  tracks.forEach(element => {\n    arrayOfTracks.push(element.id)\n  });\n  tracks = arrayOfTracks.toString()\n  const apiURL = \"https://api.spotify.com/v1/audio-features/?ids=\"+tracks\n  const response = await fetch(apiURL, {\n      method: 'GET',\n      mode: 'cors', \n      cache: 'no-cache',\n      credentials: 'same-origin',\n      headers: {\n        'Authorization': 'Bearer ' + token\n      }\n    });\n   const libraryObject = await response.json();\n\n   return libraryObject\n}\n\n\nvar generateReady = false;\nvar totalTime = 0;\n\nclass MainFrame extends React.Component {\n    constructor(props){\n     super(props)\n        this.state = {importedLibrary:false, importedTop:false, imported:[], features:[], generateReady:false, totalTime:0, renderTable: true, pickPlaylist: false, open:false, setOpen: false, featuresGenerated:false,user_id:\"null\"}\n      }\n    componentDidMount(){\n      getSpotifyProfile(this.props.token).then((value)=>{this.setState({user_id:value.id})})\n    }\n\n    handleOpen(){\n      this.setState({open:true})\n    }\n    handleClose(){\n      this.setState({open:false})\n    }\n    \n    handleLibraryImport(){\n      addUserLibrary(this.props.token,10).then((librarySongs)=>{\n          const trackArray = librarySongs.items.map(function (obj) {\n            return obj.track;\n          });\n          this.setState(prevState => ({\n            imported: [...prevState.imported,...trackArray]\n          }))\n        })\n        this.setState({importedLibrary: true})\n      }\n\n    handleTopImport(){\n     addUserTopTracks(this.props.token,10).then((topTracks)=>{\n        this.setState(prevState => ({\n          imported: [...prevState.imported,...topTracks.items]\n        }))\n     })\n     this.setState({importedTop: true})\n    }\n\n    checkTrackSize = (dataFromChild)=>{\n      if(dataFromChild >= 60 && this.state.generateReady == false){\n        console.log(\"Generate ready!\" + dataFromChild)\n        this.setState({generateReady:true})\n        totalTime = dataFromChild\n      }\n    }\n    handleGenerate(){\n      addLibraryFeatures(this.props.token, this.state.imported).then((features)=>{\n        let importedSong = this.state.imported\n        var count =  0;\n        importedSong.forEach(element => {\n          element.feature = features.audio_features[count];\n          count = count + 1;\n        });\n        this.setState({imported:importedSong,renderTable:false, pickPlaylist: true, generateReady: false, featuresGenerated:true})\n    })\n  }\n\n\n\n\n    render(){\n        return( \n            <Container  maxWidth=\"lg\" style={{padding: \"5%\"}}>\n                <Paper style={{margin:\"5%\", padding:\"5%\", height: '100%', backgroundImage:'linear-gradient(60deg, #29323c 0%, #485563 100%)',  display: 'grid',}}> \n                <Grid container spacing={5}>\n                <Grid item xs>\n                  <Button  disabled={this.state.importedLibrary} variant=\"contained\" size=\"large\"   onClick={()=>(this.handleLibraryImport())}> Import Saved Tracks </Button>\n                </Grid>\n                  <Grid item xs>\n                  <Button disabled={this.state.importedTop} variant=\"contained\" size=\"large\"  onClick={()=>(this.handleTopImport())} > Import Library Tracks </Button>\n                 </Grid>\n                 <Grid item xs>\n                   <Button  disabled={!this.state.generateReady} variant=\"contained\" size=\"large\"  onClick={()=>(this.handleGenerate())} > Generate Features </Button>\n                  </Grid>\n                  <Grid item xs>\n                    <PlaylistSelector token={this.props.token} user_id={this.state.user_id} featuresGenerated={!this.state.featuresGenerated} importedSong={this.state.imported}/> \n                  </Grid>\n                 <Grid item xs={12}>\n                  {(this.state.renderTable) ? <Tracks generateReady={this.checkTrackSize} tracksImported={this.state.importedLibrary || this.state.importedTop} allTracks={this.state.imported}/> : <Playlist allTracks={this.state.imported}/> }\n                 </Grid>\n                </Grid>\n                </Paper>\n            </Container>\n        )\n    }\n\n\n\n}\n export  default MainFrame;"]},"metadata":{},"sourceType":"module"}